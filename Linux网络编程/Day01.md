## 1.协议

本质就是 **一组规则**

从应用的角度出发，协议可理解为“规则”，是数据传输和数据的解释的规则。

假设，A、B双方欲传输文件。规定：

第一次，传输文件名，接收方接收到文件名，应答OK给传输方；

第二次，发送文件的尺寸，接收方接收到该数据再次应答一个OK；

第三次，传输文件内容。同样，接收方接收数据完成后应答OK表示文件内容接收成功。

由此，无论A、B之间传递何种文件，都是通过三次数据传输来完成。A、B之间形成了一个最简单的数据传输规则。双方都按此规则发送、接收数据。A、B之间达成的这个相互遵守的规则即为协议。

>这种仅在A、B之间被遵守的协议称之为**原始协议**。当此协议被更多的人采用，不断的增加、改进、维护、完善。最终形成一个稳定的、完整的文件传输协议，被广泛应用于各种文件传输过程中。该协议就成为一个**标准协议**。最早的ftp协议就是由此衍生而来。

TCP协议注重数据的传输。http协议着重于数据的解释。

### 1.1典型协议

传输层 常见协议有TCP/UDP协议。

应用层 常见的协议有HTTP协议，FTP协议。

网络层 常见协议有IP协议、ICMP协议、IGMP协议。

网络接口层 常见协议有ARP协议、RARP协议。

## 2.网络应用程序设计模式

```c
       C/S：Client/Server                         B/S：Browser/Server
 
优点：	缓存大量数据、协议选择灵活、速度快			安全性、跨平台、开发工作量较小
	
 
缺点：	安全性差、开发工作量大、跨平台难			 不能缓存大量数据、必须严格遵守http协议
```

## 3.分层模型

### 3.1 OSI七层模型

OSI模型

```
物理层：主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等
    它的主要作用是传输比特流（就是由1、0转化为电流强弱来进行传输，到达目的地后再转化为1、0，也就是我们常说的数模转换与模数转换）
    这一层的数据叫做比特
 
数据链路层：定义了如何让格式化数据以帧为单位进行传输，以及如何让控制对物理介质的访问
    这一层通常还提供错误检测和纠正，以确保数据的可靠传输
    如：串口通信中使用到的115200、8、N、1
 
网络层：在位于不同地理位置的网络中的两个主机系统之间提供连接和路径选择
    Internet的发展使得从世界各站点访问信息的用户数大大增加，而网络层正是管理这种连接的层
 
传输层：定义了一些传输数据的协议和端口号（WWW端口80等）
    如：TCP（传输控制协议，传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据）
       UDP（用户数据报协议，与TCP特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如QQ聊天数据就是通过这种方式传输的）
       主要是将从下层接收的数据进行分段和传输，到达目的地址后再进行重组。常常把这一层数据叫做段
 
会话层：通过传输层(端口号：传输端口与接收端口)建立数据传输的通路
    主要在你的系统之间发起会话或者接受会话请求（设备之间需要互相认识可以是IP也可以是MAC或者是主机名）
 
表示层：可确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取
    例如，PC程序与另一台计算机进行通信，其中一台计算机使用扩展二一十进制交换码(EBCDIC)
         而另一台则使用美国信息交换标准码（ASCII）来表示相同的字符
    如有必要，表示层会通过使用一种通格式来实现多种数据格式之间的转换
 
应用层：是最靠近用户的OSI层。这一层为用户的应用程序（例如电子邮件、文件传输和终端仿真）提供网络服务
```

分层模型结构：

	OSI七层模型结构（我的记忆方法_巫术网传会报应）：  物、数、网、传、会、表、应
	 
	TCP/IP 4层模型结构：网（链路层/网络接口层）、网、传、应
	 
		应用层：http、ftp、nfs、ssh、telnet。。。
	 
		传输层：TCP、UDP
	 
		网络层：IP、ICMP、IGMP
	 
		链路层：以太网帧协议、ARP

![img](https://img-blog.csdnimg.cn/0df1a23937fa4b0ca3eebaa40e97db3a.png)

## 4.通信过程



> 数据没有封装之前，是不能在网络中传递。
>
> 数据-》应用层-》传输层-》网络层-》链路层  --- 网络环境
>
>
> 只有应用层协议在用户态可见，往下的都处在内核中（什么是内核？）

### 4.1IP段格式

```
版本： IPv4、IPv6  -- 4位
 
TTL： time to live 。 设置数据包在路由节点中的跳转上限。每经过一个路由节点，该值-1， 减为0的路由，有义务将该数据包丢弃
 
源IP： 32位。--- 4字节		192.168.1.108 --- 点分十进制 IP地址（string）  --- 二进制 
 
目的IP：32位。--- 4字节
```

**IP地址：可以在网络环境中，唯一标识一台主机。**

**端口号：可以网络的一台主机上，唯一标识一个进程。**

**ip地址+端口号：可以在网络环境中，唯一标识一个进程。**
